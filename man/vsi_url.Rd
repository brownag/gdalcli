% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/core-vsi_url.R
\name{vsi_url}
\alias{vsi_url}
\title{Compose GDAL Virtual File System (VSI) URLs}
\usage{
vsi_url(handler, ..., streaming = FALSE, validate = FALSE)
}
\arguments{
\item{handler}{Character string identifying the VSI handler prefix (e.g., "vsis3",
"vsizip", "vsiaz"). Dispatches to the corresponding handler function.
Supported handlers are documented via their individual functions (see \strong{See Also} section).}

\item{...}{Handler-specific arguments. Passed through to the corresponding \verb{vsi*_url()} function.}

\item{streaming}{Logical. If \code{TRUE}, appends \verb{_streaming} to the handler prefix
(e.g., \verb{/vsis3_streaming/} instead of \verb{/vsis3/}). Streaming handlers are
optimized for sequential-only access and should be used only when random-access
efficiency is not required. Default is \code{FALSE} (random-access, recommended for
Cloud Optimized GeoTIFF and similar formats).}

\item{validate}{Logical. If \code{TRUE}, performs strict validation on path components:
checks for empty strings, illegal characters, and other constraints. Default is
\code{FALSE}, which preserves maximum flexibility for composing URLs to non-existent,
remote, or future paths.}
}
\value{
A character string representing the composed VSI path, suitable for use with
GDAL-aware functions (e.g., \code{sf::read_sf()}, \code{stars::read_stars()}, \code{raster::brick()}).
}
\description{
\code{vsi_url()} composes GDAL Virtual File System (VSI) URLs across 30+ handlers
including cloud storage (S3, GCS, Azure, OSS, Swift), archive formats (ZIP, TAR, 7z, RAR),
and utility handlers (memory, subfile, encryption).

The function supports recursive composition of VSI paths, enabling complex nested
scenarios such as accessing a shapefile within a ZIP archive stored on an S3 bucket.
Authentication is decoupled from URL composition and managed through environment
variables via \code{\link[=set_gdal_auth]{set_gdal_auth()}}.
}
\details{
\code{vsi_url()} dispatches to handler-specific functions based on the \code{handler} parameter:

\strong{Path-based handlers:} \code{\link[=vsis3_url]{vsis3_url()}}, \code{\link[=vsigs_url]{vsigs_url()}}, \code{\link[=vsiaz_url]{vsiaz_url()}}, \code{\link[=vsiadls_url]{vsiadls_url()}},
\code{\link[=vsioss_url]{vsioss_url()}}, \code{\link[=vsiswift_url]{vsiswift_url()}}, \code{\link[=vsicurl_url]{vsicurl_url()}}, \code{\link[=vsigzip_url]{vsigzip_url()}}, \code{\link[=vsimem_url]{vsimem_url()}},
\code{\link[=vsihdfs_url]{vsihdfs_url()}}, \code{\link[=vsiwebhdfs_url]{vsiwebhdfs_url()}}

\strong{Wrapper/archive handlers:} \code{\link[=vsizip_url]{vsizip_url()}}, \code{\link[=vsitar_url]{vsitar_url()}}, \code{\link[=vsi7z_url]{vsi7z_url()}}, \code{\link[=vsirar_url]{vsirar_url()}},
\code{\link[=vsisubfile_url]{vsisubfile_url()}}, \code{\link[=vsicrypt_url]{vsicrypt_url()}}, \code{\link[=vsicached_url]{vsicached_url()}}, \code{\link[=vsisparse_url]{vsisparse_url()}}
}
\section{GDAL Version Support}{


\strong{Minimum GDAL version: 3.6.1} (recommended for production use).

Handler availability across GDAL versions:

Cloud handlers (S3, GCS, Azure, OSS, Swift) are available across all GDAL 3.x versions.
Archive handlers (ZIP, TAR, GZip) are available across all versions.
Archive handlers (7z, RAR) require GDAL 3.7.0 or later (with libarchive).
Utility handlers (mem, subfile, crypt, cached, sparse) are available across all versions.
Network handlers (curl, HDFS, WebHDFS) are available across all versions.
}

\section{Authentication}{


Credentials for cloud storage handlers must be configured via environment variables.
Use \code{\link[=set_gdal_auth]{set_gdal_auth()}} to set these variables securely:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{# Set AWS S3 credentials
set_gdal_auth("s3", access_key_id = "...", secret_access_key = "...")

# Set Azure Blob Storage credentials
set_gdal_auth("azure", connection_string = "...")

# Then compose and use the URL
url <- vsi_url("vsis3", bucket = "my-bucket", key = "path/to/file.tif")
}\if{html}{\out{</div>}}
}

\section{Performance Considerations}{

\itemize{
\item \strong{Random-access (default)}: Use \code{streaming = FALSE} (default) for formats like
Cloud Optimized GeoTIFF (COG), which benefit from efficient HTTP Range requests
to read small data windows.
\item \strong{Streaming}: Use \code{streaming = TRUE} only for sequential-only workflows (e.g.,
reading an entire compressed file from start to finish). Streaming through remote
data can be slower due to lack of seek efficiency.
}
}

\examples{
# Public Sentinel-2 data on AWS:
vsi_url("vsis3",
  bucket = "sentinel-pds",
  key = "tiles/10/S/DG/2015/12/7/0/B01.jp2"
)

# Simple local ZIP:
vsi_url("vsizip", archive_path = "data.zip", file_in_archive = "layer.shp")

}
\references{
\itemize{
\item Official GDAL VSI Documentation: \url{https://gdal.org/user/virtual_file_systems.html}
\item GDAL Release Notes: \url{https://github.com/OSGeo/gdal/blob/master/NEWS.md}
\item RFC: GDAL Virtual File Systems: \url{https://gdal.org/development/rfc/rfc25.html}
}
}
\seealso{
\code{\link[=vsis3_url]{vsis3_url()}}, \code{\link[=vsigs_url]{vsigs_url()}}, \code{\link[=vsiaz_url]{vsiaz_url()}}, \code{\link[=vsiadls_url]{vsiadls_url()}}, \code{\link[=vsioss_url]{vsioss_url()}},
\code{\link[=vsiswift_url]{vsiswift_url()}}, \code{\link[=vsicurl_url]{vsicurl_url()}}, \code{\link[=vsigzip_url]{vsigzip_url()}}, \code{\link[=vsimem_url]{vsimem_url()}}, \code{\link[=vsihdfs_url]{vsihdfs_url()}},
\code{\link[=vsiwebhdfs_url]{vsiwebhdfs_url()}}, \code{\link[=vsizip_url]{vsizip_url()}}, \code{\link[=vsitar_url]{vsitar_url()}}, \code{\link[=vsi7z_url]{vsi7z_url()}}, \code{\link[=vsirar_url]{vsirar_url()}},
\code{\link[=vsisubfile_url]{vsisubfile_url()}}, \code{\link[=vsicrypt_url]{vsicrypt_url()}}, \code{\link[=vsicached_url]{vsicached_url()}}, \code{\link[=vsisparse_url]{vsisparse_url()}}
}
