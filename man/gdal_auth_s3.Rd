% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/core-gdal_auth_helpers.R
\name{gdal_auth_s3}
\alias{gdal_auth_s3}
\title{Create Process-Isolated AWS S3 Authentication Environment Variables}
\usage{
gdal_auth_s3(no_sign_request = FALSE)
}
\arguments{
\item{no_sign_request}{Logical. If \code{TRUE}, configures unsigned (public) bucket
access without requiring credentials. Default \code{FALSE}.}
}
\value{
A named character vector of environment variables suitable for passing to
\code{\link[=gdal_with_env]{gdal_with_env()}}. Keys are variable names like \code{AWS_ACCESS_KEY_ID}; values
are the corresponding credentials read from the environment.
}
\description{
\code{gdal_auth_s3()} reads AWS S3 authentication credentials from environment
variables and returns them as a named character vector suitable for use with
\code{\link[=gdal_with_env]{gdal_with_env()}}.

\strong{IMPORTANT}: Credentials are read from environment variables (not from function
arguments) to prevent accidental exposure in code repositories. This encourages
secure credential management via \code{.Renviron} files or external secret managers.

This is the modern, recommended approach: it avoids global state pollution,
ensures credentials are process-isolated, and works correctly in parallel
execution contexts.
}
\section{Setting Up Credentials}{


\strong{Option 1: Using .Renviron (Recommended)}

Add to your \verb{~/.Renviron} or project \code{.Renviron}:

\if{html}{\out{<div class="sourceCode">}}\preformatted{AWS_ACCESS_KEY_ID=your_access_key_id
AWS_SECRET_ACCESS_KEY=your_secret_access_key
AWS_SESSION_TOKEN=optional_session_token
AWS_REGION=us-west-2
}\if{html}{\out{</div>}}

Then restart R or run \code{readRenviron("~/.Renviron")}.

\strong{Option 2: Using Sys.setenv() (Temporary, for this session only)}

\if{html}{\out{<div class="sourceCode r">}}\preformatted{Sys.setenv(
  AWS_ACCESS_KEY_ID = "your_key",
  AWS_SECRET_ACCESS_KEY = "your_secret"
)
}\if{html}{\out{</div>}}

\strong{Option 3: External Credentials File}

Use AWS credential files at \verb{~/.aws/credentials} and set:

\if{html}{\out{<div class="sourceCode">}}\preformatted{AWS_PROFILE=your_profile_name
}\if{html}{\out{</div>}}
}

\section{Usage Example}{


\if{html}{\out{<div class="sourceCode r">}}\preformatted{# In your .Renviron file:
# AWS_ACCESS_KEY_ID=AKIA...
# AWS_SECRET_ACCESS_KEY=wJalr...

# In your R script:
auth <- gdal_auth_s3()  # Reads from environment

job <- gdal_gdal_vector_convert(
  input = gdal_vsi_url("vsis3", bucket = "my-bucket", key = "data.shp"),
  output_format = "GPKG"
) |>
  gdal_with_env(auth) |>
  gdal_run()
}\if{html}{\out{</div>}}
}

\section{Why No Function Arguments?}{


Credentials are \strong{intentionally not accepted as function arguments} because:
\itemize{
\item OK Prevents accidental hardcoding of secrets in R scripts
\item OK Reduces risk of leaking credentials via version control or logs
\item OK Encourages secure credential management via .Renviron
\item OK Follows security best practices (12-factor app)
}
}

